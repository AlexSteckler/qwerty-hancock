!function(e){var t=function(t){var n={};n.version="0.3";var l,o=t.id||"keyboard",i=t.element||document.getElementById(o),a=t.octaves||3,r=7*a,s=t.width||600,d=t.height||150,u=t.startNote||"A3",c=u.charAt(1),y=t.whiteKeyColour||"#FFF",h=t.blackKeyColour||"#000",f=t.hoverColour||"#076cf0",p=1,k=Math.floor((s-r*p)/r),v=t.blackKeyWidth||Math.floor(k/2),C=t.blackKeyHeight||d/1.5,g=t.keyboardLayout||"en",m=["C","D","E","F","G","A","B"],b=["A","C","D","F","G"],E=b.length*a,D=u.charAt(0),w=0,A=c,F={},G=[],I=!1,x=0,t={},B="ontouchstart"in document.documentElement,L=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],M=function(e){l=e.inputs()[0],l.onmidimessage=function(e){var t=e.data,l=L[t[1]%12]+parseInt(t[1]/12);144==t[0]?(n.keyDown(l,U(l)),(el=document.getElementById(l))&&K.call(el)):128==t[0]&&(n.keyUp(l,U(l)),(el=document.getElementById(l))&&S.call(el))}},O=function(e){console.info("Midi access restricted(maybe you forgot to enable it in chrome://flags): "+e.code)};n.keyDown=function(){},n.keyUp=function(){};var U=function(e){var t,n,l=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"];return n=e.charAt(3===e.length?2:1),t=l.indexOf(e.slice(0,-1)),t=3>t?t+12+12*(n-1)+1:t+12*(n-1)+1,440*Math.pow(2,(t-49)/12)};!function(){for(x=0;7>x;x++)if(D===m[x]){keyOffset=x;break}for(x=0;7>x;x++)G[x]=x+keyOffset>6?m[x+keyOffset-7]:m[x+keyOffset]}();var K=function(){this.style.backgroundColor=f},S=function(){this.style.backgroundColor="white"===this.getAttribute("data-note-type")?y:h},q=function(){I=!0,K.call(this),n.keyDown(this.title,U(this.title))},H=function(){I=!1,S.call(this),n.keyUp(this.title,U(this.title))},z=function(){I&&(K.call(this),n.keyDown(this.title,U(this.title)))},N=function(){I&&(S.call(this),n.keyUp(this.title,U(this.title)))},Q=function(e){B?(e.addEventListener("touchstart",q),e.addEventListener("touchend",H),e.addEventListener("touchleave",H),e.addEventListener("touchcancel",H)):(e.addEventListener("mousedown",q),e.addEventListener("mouseup",H),e.addEventListener("mouseover",z),e.addEventListener("mouseout",N))},R=function(){var e=document.createElement("ul"),t=0,n=0;e.style.height=d+"px",e.style.width=s+"px",e.style.padding=0,e.style.position="relative",e.style.cursor="default",e.style["-webkit-user-select"]="none";var l=function(){for(t=0,w=c,x=0;r>x;x++){var l=document.createElement("li");x%m.length===0&&(t=0),l.style.backgroundColor=y,l.style.display="inline-block",l.style.height=d+"px",l.style.width=k+"px",l.style.border="1px solid black",l.style.borderRight=0,l.style["-webkit-user-select"]="none",l.setAttribute("data-note-type","white"),x%m.length===0&&(t=0),n=G[t],"C"===n&&w++,l.id=G[t]+(w-1),l.title=G[t]+(w-1),Q(l),e.appendChild(l),t++}},o=function(){for(t=0,w=c,x=0;r>x;x++){x%m.length===0&&(t=0);for(var l=0;E>l;l++)if(G[t]===b[l]&&(n=G[t]+"#","C#"===n&&w++,s-k>(k+1)*(x+1))){var o=document.createElement("li");o.style.backgroundColor=h,o.style.display="inline-block",o.style.position="absolute",o.style.left=Math.floor((k+1)*(x+1)-v/2)+"px",o.style.border="1px solid black",o.style.width=v+"px",o.style.height=C+"px",o.id=G[t]+"#"+(w-1),o.title=G[t]+"#"+(w-1),o.setAttribute("data-note-type","black"),Q(o),e.appendChild(o)}t++}};l(),o(),i.style.fontSize="0px",i.appendChild(e)};if(R(),"en"==g)var W={65:"Cl",87:"C#l",83:"Dl",69:"D#l",68:"El",70:"Fl",84:"F#l",71:"Gl",89:"G#l",72:"Al",85:"A#l",74:"Bl",75:"Cu",79:"C#u",76:"Du",80:"D#u",59:"Eu",186:"Eu",222:"Fu",221:"F#u",220:"Gu"};else if("de"==g)var W={65:"Cl",87:"C#l",83:"Dl",69:"D#l",68:"El",70:"Fl",84:"F#l",71:"Gl",90:"G#l",72:"Al",85:"A#l",74:"Bl",75:"Cu",79:"C#u",76:"Du",80:"D#u",186:"Eu",222:"Fu",221:"F#u",220:"Gu"};var j=function(e){var t,l;e.keyCode in F||(F[e.keyCode]=!0,"undefined"!=typeof W[e.keyCode]&&(l=W[e.keyCode].replace("l",A).replace("u",(parseInt(A,10)+1).toString()),n.keyDown(l,U(l)),t=document.getElementById(l),K.call(t)))},J=function(e){var t,l;delete F[e.keyCode],"undefined"!=typeof W[e.keyCode]&&(l=W[e.keyCode].replace("l",A).replace("u",(parseInt(A,10)+1).toString()),n.keyUp(l,U(l)),t=document.getElementById(l),S.call(t))};return navigator.requestMIDIAccess&&navigator.requestMIDIAccess().then(M,O),e.onkeydown=j,e.onkeyup=J,n};e.QwertyHancock=t}(window);