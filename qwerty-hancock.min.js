/* Qwerty Hancock 0.2.0 (c) 2013 Stuart Memo */
!function(a){var b=function(b){var c={};c.version="0.3",c.id=b.id||"keyboard",c.octaves=b.octaves||3;var d=b.id||"keyboard",e=b.octaves||3,f=7*e,g=b.width||600,h=b.height||150,i=b.startNote||"A3",j=i.charAt(1),k=b.whiteKeyColour||"#FFF",l=b.blackKeyColour||"#000",m=b.hoverColour||"#076cf0",n=1,o=Math.floor((g-f*n)/f),p=b.blackKeyWidth||Math.floor(o/2),q=b.blackKeyHeight||h/1.5,r=b.keyboardLayout||"en",s=["C","D","E","F","G","A","B"],t=["A","C","D","F","G"],u=t.length*e,v=i.charAt(0),w=0,x=j,y={},z=[],A=!1,B=0,b={};c.keyDown=function(){},c.keyUp=function(){};var C=function(a){var b,c,d=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"];return c=3===a.length?a.charAt(2):a.charAt(1),b=d.indexOf(a.slice(0,-1)),b=3>b?b+12+12*(c-1)+1:b+12*(c-1)+1,440*Math.pow(2,(b-49)/12)};!function(){for(B=0;7>B;B++)if(v===s[B]){keyOffset=B;break}for(B=0;7>B;B++)z[B]=B+keyOffset>6?s[B+keyOffset-7]:s[B+keyOffset]}();var D=function(){this.style.backgroundColor=m},E=function(){this.style.backgroundColor="white"===this.getAttribute("data-note-type")?k:l},F=function(){A=!0,D.call(this),c.keyDown(this.title,C(this.title))},G=function(){A=!1,E.call(this),c.keyUp(this.title,C(this.title))},H=function(){A&&(D.call(this),c.keyDown(this.title,C(this.title)))},I=function(){E.call(this),c.keyUp(this.title,C(this.title))},J=function(a){a.addEventListener("mousedown",F),a.addEventListener("mouseup",G),a.addEventListener("mouseover",H),a.addEventListener("mouseout",I)},K=function(){var a=document.getElementById(c.id),b=document.createElement("ul"),d=0,e=0;b.style.height=h+"px",b.style.width=g+"px",b.style.padding=0,b.style.position="relative",b.style.cursor="default",b.style["-webkit-user-select"]="none";var i=function(){for(d=0,w=j,B=0;f>B;B++){var a=document.createElement("li");0===B%s.length&&(d=0),a.style.backgroundColor=k,a.style.display="inline-block",a.style.height=h+"px",a.style.width=o+"px",a.style.border="1px solid black",a.style.borderRight=0,a.style["-webkit-user-select"]="none",a.setAttribute("data-note-type","white"),0===B%s.length&&(d=0),e=z[d],"C"===e&&w++,a.id=z[d]+(w-1),a.title=z[d]+(w-1),J(a),b.appendChild(a),d++}},m=function(){for(d=0,w=j,B=0;f>B;B++){0===B%s.length&&(d=0);for(var a=0;u>a;a++)if(z[d]===t[a]&&(e=z[d]+"#","C#"===e&&w++,g-o>(o+1)*(B+1))){var c=document.createElement("li");c.style.backgroundColor=l,c.style.display="inline-block",c.style.position="absolute",c.style.left=Math.floor((o+1)*(B+1)-p/2)+"px",c.style.border="1px solid black",c.style.width=p+"px",c.style.height=q+"px",c.id=z[d]+"#"+(w-1),c.title=z[d]+"#"+(w-1),c.setAttribute("data-note-type","black"),J(c),b.appendChild(c)}d++}};i(),m(),a.style.fontSize="0px",a.appendChild(b)};if(K(d),"en"==r)var L={65:"Cl",87:"C#l",83:"Dl",69:"D#l",68:"El",70:"Fl",84:"F#l",71:"Gl",89:"G#l",72:"Al",85:"A#l",74:"Bl",75:"Cu",79:"C#u",76:"Du",80:"D#u",59:"Eu",186:"Eu",222:"Fu",221:"F#u",220:"Gu"};else if("de"==r)var L={65:"Cl",87:"C#l",83:"Dl",69:"D#l",68:"El",70:"Fl",84:"F#l",71:"Gl",90:"G#l",72:"Al",85:"A#l",74:"Bl",75:"Cu",79:"C#u",76:"Du",80:"D#u",186:"Eu",222:"Fu",221:"F#u",220:"Gu"};var M=function(a){var b,d;a.keyCode in y||(y[a.keyCode]=!0,"undefined"!=typeof L[a.keyCode]&&(d=L[a.keyCode].replace("l",x).replace("u",(parseInt(x,10)+1).toString()),c.keyDown(d,C(d)),b=document.getElementById(d),D.call(b)))},N=function(a){var b,d;delete y[a.keyCode],"undefined"!=typeof L[a.keyCode]&&(d=L[a.keyCode].replace("l",x).replace("u",(parseInt(x,10)+1).toString()),c.keyUp(d,C(d)),b=document.getElementById(d),E.call(b))};return a.onkeydown=M,a.onkeyup=N,c};a.QwertyHancock=b}(window);