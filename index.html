<!doctype html>
<html>
    <head>
        <script src="jquery-1.7.2.min.js"></script>
        <script src="raphael-min.js"></script>
        <link rel="stylesheet" href="style.css"/>
    </head>
    <body>
        <div class="container">
            <img class="the-hancock" src="qwerty-hancock.png"/>
            <h1>Qwerty Hancock</h1>
            <p>Need an interactive vector keyboard for your musical project? Qwerty Hancock is just the thing.</p>
            <p>Specify the number of keys you want on your keyboard, give it a height and a width then you're ready to use your mouse or keyboard to have the time of your life.</p>
            <div id="keyboard"></div>
            <p>The example above is tied up to a basic sine wave synth using the Web Audio API so only you'll hear something in some browsers (Chrome for sure), but don't worry, you can use Qwerty Hancock for any project in any browser (apart from old rubbish ones.)</p>
            <h2>How to use</h2>
            <p>Qwerty Hancock relies on a couple of things, namely:</p>
            <ol>
                <li><a href="http://raphaeljs.com/">Raphael</a>
                <li><a href="http://craig.is/killing/mice">Mousetrap</a> (if you want keyboard support)
            </ol>
            <h2>Need help or have an idea to make QH better?</h2>
            <p>No problem, just give me a shout on <a href="http://twitter.com/stuartmemo">Twitter</a>.</p>
        </div>
        <script>
            $(function () {
                var qwertyHancock = function (id, width, height, octaves) {
                    var numberOfOctaves = octaves || 3,
                        totalWhiteKeys = numberOfOctaves * 7; 
                        keyboardWidth = width || 600,
                        keyboardHeight = height || 150,
                        whiteKeyWidth = keyboardWidth / totalWhiteKeys,
                        blackKeyWidth = whiteKeyWidth / 2,
                        paper = new Raphael(id, keyboardWidth, keyboardHeight),
                        notes = ['A', 'B', 'C', 'D', 'E', 'F', 'G'], 
                        notesWithSharps = ['A', 'C', 'D', 'F', 'G'], 
                        noteCounter = 0;

                   for (var i = 0; i < totalWhiteKeys; i++) {
                        if ((i % notes.length) === 0) {
                            noteCounter = 0;
                        }

                        paper.rect(whiteKeyWidth * i, 0, whiteKeyWidth, keyboardHeight).attr({'title': notes[noteCounter], fill: 'white'}).mousedown(function () {
                            this.attr({fill: '#076cf0'});
                        }).mouseover(function () {
                            this.attr({fill: '#076cf0'});
                        }).mouseup(function () {
                            this.attr({fill: 'white'});   
                        }).mouseout(function () {
                            this.attr({fill: 'white'});   
                        });

                        noteCounter++;
                   }

                   for (i = 0; i < totalWhiteKeys; i++) {
                        if ((i % notes.length) === 0) {
                            noteCounter = 0;
                        }
                        for (var j = 0; j < notesWithSharps.length; j++) {
                            if (notes[noteCounter] === notesWithSharps[j]) { 
                                // Don't draw last black note
                                if ((whiteKeyWidth * (i + 1)) < keyboardWidth) {
                                    paper.rect((whiteKeyWidth * i) + (blackKeyWidth * 1.5) , 0, blackKeyWidth, (keyboardHeight / 3)* 2).attr({title: notes[noteCounter] + '#', fill: 'black'});
                                }
                            }
                        }
                        noteCounter++;
                   }
                };

                var keyboard = qwertyHancock('keyboard', 600, 150, 3);
            });
        </script>
    </body>
</html>
